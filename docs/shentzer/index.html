
<!DOCTYPE html>
<html>
<style>
    * {
        box-sizing: border-box;
    }

    html,
    body {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        border: 1px solid transparent;
    }

    body {
        background-color: whitesmoke;
    }

    main {
        overflow: hidden;
        padding: 2em;
        width: 30em;
        margin: 10em auto;
        background-color: white;
        box-shadow: 0 0 0.3em #aaa;
    }

    #q {
        font-weight: bold;
    }

    .answers {
        line-height: 1.5em;
    }

    .answer>label {
        line-height: 1.5em;
        cursor: pointer;
    }

    input[type=radio] {
        cursor: pointer;
    }

    input[type=radio]:disabled {
        display: none;
    }

    input[type=radio]:disabled+label {
        cursor: default;
    }

    :disabled+label[correct='no']::before {
        content: '❌';
        margin-left: .5em;
    }

    :disabled+label[correct='yes']::before {
        content: '✔️';
        margin-left: .5em;
    }

    #chat {
        max-height: 80em;
        margin: 2em 0;
        overflow: auto;
        font-size: .8em;
        opacity: 0;
        /* transition: opacity 3s; */
    }

    .msg {
        margin: .5em 0;
        padding: .3em .5em;
        background-color: #f0fff3;
        border: 1px solid #eee;
        border-radius: .5em;
    }

    time {
        color: #999;
        font-size: .8em;
        float: left;
    }

    .sender {
        font-weight: bold;
    }

    #score {
        font-size: 1.5em;
        font-weight: bold;
        text-align: center;
    }
</style>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>

    <title>מי אמר למי?</title>

    <meta property="og:title" content="מי אמר למי?">
    <meta property="og:site_name" content="מי אמר למי?">
    <meta property="og:url" content="">
    <meta property="og:description" content="מי אמר למי?.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://gkutiel.github.io/wabot/favicon.png">

    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel="icon" type="image/png" href="https://gkutiel.github.io/wabot/favicon.png" />


</head>

<body dir='rtl'>
    <main>
        <p>מי אמר/ה?</p>
        <p id='q'></p>

        <div id='answers'>
        </div>

        <div id="chat"></div>

        <div class="next">
            <button id='next'>שאלה הבאה</button>
        </div>
        <div id="score"></div>
    </main>
</body>

<script>
    function $(id) {
        return document.getElementById(id);
    }

    function e(html) {
        const div = document.createElement('div')
        div.innerHTML = html
        return div.firstElementChild
    }

    class Question {
        constructor(text) {
            this.e = $('q');
        }
        set text(text) {
            this.e.innerText = text;
        }
    }

    class Answer {
        static id = 0;
        constructor(cb) {
            const id = Answer.id++;
            this.good = false
            this.e = e(`
                <div class="answer">
                    <input type='radio' id='${id}' name='answer' />
                    <label for='${id}' correct='no'></label>
                </div>
            `)
            $('answers').appendChild(this.e)

            this.e.addEventListener('change', () => {
                $('chat').style.opacity = 1;
                cb(this.correct);
            })

            this.label = this.e.querySelector('label')
            this.input = this.e.querySelector('input')
        }

        set text(text) {
            this.label.innerText = text;
            this.input.disabled = false;
            this.input.checked = false;
        }

        set correct(correct) {
            this.good = correct;
            this.label.setAttribute('correct', correct ? 'yes' : 'no')
        }

        get correct() {
            return this.good;
        }

        disable() {
            this.input.disabled = true;
        }
    }

    class Chat {
        constructor() {
            this.e = $('chat');
        }
        set msgs(msgs) {
            this.e.style.opacity = 0;
            this.e.innerHTML = '';
            for (const msg of msgs) {
                this.e.appendChild(e(`
                    <div class='msg'>
                        <time>${msg.time}</time>
                        <span class='sender'>${msg.sender}</span>
                        <div>${msg.text}</div>
                    </div>
                `))
            }
        }
    }


    class Quiz {
        constructor(quiz) {
            this.score = 0;
            this.qid = 0;
            this.quiz = quiz;

            this.scoreDiv = $('score');
            this.question = new Question();

            this.answers = [
                new Answer(this.on_answer),
                new Answer(this.on_answer),
                new Answer(this.on_answer)];

            this.chat = new Chat();
            this.nextButton = $('next');
            this.nextButton.addEventListener('click', this.next);
        }

        nextQuestion() {
            return this.quiz[this.qid++];
        }

        on_answer = (correct) => {
            if (correct) {
                this.score++;
            }

            for (let answer of this.answers) {
                answer.disable();
            }

            this.nextButton.disabled = false;
            this.scoreDiv.innerText = `${this.qid}/${this.quiz.length}`;
        }

        next = () => {
            try {
                const q = this.nextQuestion();
                this.nextButton.disabled = true;
                this.question.text = q.text;
                this.chat.msgs = q.chat;

                for (let i = 0; i < this.answers.length; i++) {
                    this.answers[i].text = q.senders[i];
                    this.answers[i].correct = q.senders[i] === q.sender;
                }
            } catch (e) {
                const score = (this.score / this.qid * 100).toFixed(0)
                this.scoreDiv.innerText = `תוצאה סופית: ${score}%`;
            }
        }
    }
    const quiz = new Quiz([{"text": "אבל אם כן, אז שלא ישכחו לתעד את זה במצלמה שלכם", "sender": "ענת אופיר", "senders": ["ענת אופיר", "איילת אדלר", "אופיר שנצר"], "chat": [{"time": "24/03/2021, 07:32", "sender": "ד\"ר טליה שנצר", "text": "הזולה של יואב ויעל"}, {"time": "24/03/2021, 07:44", "sender": "אופיר שנצר", "text": "רק שלא יתחילו לחשש שם"}, {"time": "24/03/2021, 08:16", "sender": "ענת אופיר", "text": "אבל אם כן, אז שלא ישכחו לתעד את זה במצלמה שלכם"}, {"time": "24/03/2021, 08:31", "sender": "ד\"ר טליה שנצר", "text": "😂"}]}, {"text": "לנו יש את כרטיסי הכניסה אז נהיה בקשר בבוקר אנחנו נחכה בכניסה.", "sender": "פסיה שנצר", "senders": ["אופיר שנצר", "ענת אופיר", "פסיה שנצר"], "chat": [{"time": "31/05/2019, 20:19", "sender": "פסיה שנצר", "text": "אז מה?מחר נפגשים בטכניון?מי מגיע ? יש מתנגדים?"}, {"time": "31/05/2019, 20:20", "sender": "פסיה שנצר", "text": "שעה 10:00?10:30 ? מתי רוצים?"}, {"time": "31/05/2019, 20:32", "sender": "איילת אדלר", "text": "נשתדל להתכוונן ל10:30,11"}, {"time": "31/05/2019, 20:33", "sender": "פסיה שנצר", "text": "👍"}, {"time": "31/05/2019, 20:40", "sender": "ענת אופיר", "text": "אנחנו בטח נגיע בסביבות 10"}, {"time": "31/05/2019, 20:42", "sender": "פסיה שנצר", "text": "לנו יש את כרטיסי הכניסה אז נהיה בקשר בבוקר אנחנו נחכה בכניסה."}, {"time": "31/05/2019, 21:07", "sender": "אופיר שנצר", "text": "👍"}, {"time": "31/05/2019, 21:20", "sender": "אלי שנצר", "text": "להביא בגד ים מצב רוח טוב מחצלת לשינה טובה כרם נגד שיזוף"}]}, {"text": "וגם ככה לא ראי ו את הקוציאלים כי הם עשו שם מסיבת שכונה", "sender": "אופיר שנצר", "senders": ["עינב אדלר", "ענת אופיר", "אופיר שנצר"], "chat": [{"time": "23/10/2021, 16:43", "sender": "גלעד", "text": "אה אז כבר עברנו."}, {"time": "23/10/2021, 16:43", "sender": "איילת אדלר", "text": "מה אנחנו עז?"}, {"time": "23/10/2021, 16:44", "sender": "אופיר שנצר", "text": "לא היו מספיק שירותים במסלול"}, {"time": "23/10/2021, 16:44", "sender": "אופיר שנצר", "text": "💩"}, {"time": "23/10/2021, 16:45", "sender": "אופיר שנצר", "text": "סתם זה היה בשעות שהאדלרים לא פעילים"}, {"time": "23/10/2021, 16:45", "sender": "אופיר שנצר", "text": "וגם ככה לא ראי ו את הקוציאלים כי הם עשו שם מסיבת שכונה"}, {"time": "23/10/2021, 16:48", "sender": "איילת אדלר", "text": "מוציאה לך לשון יא....."}, {"time": "23/10/2021, 17:32", "sender": "איילת אדלר", "text": "מתוקי שהוא"}, {"time": "23/10/2021, 17:52", "sender": "פסיה שנצר", "text": "הוא ילד כל כך שמח.מאמי קטן."}]}, {"text": "והדיירים פה לא הכי משתפי פעולה. ולא ככ זזים ברצון", "sender": "איילת אדלר", "senders": ["עינב אדלר", "אופיר שנצר", "איילת אדלר"], "chat": [{"time": "19/11/2021, 14:03", "sender": "איילת אדלר", "text": "אבל יש נוף מטורף וקררררר"}, {"time": "19/11/2021, 14:04", "sender": "אופיר שנצר", "text": "ואי ואי איזה סיוט"}, {"time": "19/11/2021, 14:05", "sender": "פסיה שנצר", "text": "ברוכים הבאים לביתכם החדש."}, {"time": "19/11/2021, 14:10", "sender": "איילת אדלר", "text": "לגמרי. כבר כולנו חשבנו שנהיה אחרי"}, {"time": "19/11/2021, 14:11", "sender": "איילת אדלר", "text": "והדיירים פה לא הכי משתפי פעולה. ולא ככ זזים ברצון"}, {"time": "19/11/2021, 16:00", "sender": "גלעד", "text": "מה נוף מטורף? מנוף מטורף לא מוצא חניה בלאט."}, {"time": "19/11/2021, 16:52", "sender": "פסיה שנצר", "text": "הי.מה קורה הורידו את הציוד?"}, {"time": "19/11/2021, 17:08", "sender": "פסיה שנצר", "text": "אני מבינה שהכל הורד.ועינב עושה שמח."}]}, {"text": "לנו יש סמסונג בת שלוש , היא סבבה אבל התוכניות שלה ממש ארוכות וזה מבאס", "sender": "אופיר שנצר", "senders": ["עינב אדלר", "איילת אדלר", "אופיר שנצר"], "chat": [{"time": "25/05/2019, 15:10", "sender": "ד\"ר טליה שנצר", "text": "הלכה לנו מכונת כביסה.."}, {"time": "25/05/2019, 15:14", "sender": "אופיר שנצר", "text": "תעשו שיהיה לה טוב והיא תישאר. תאתגרי אותה וגם תני לה לנוח ומילה טובה פעם ב .. היא תישאר אתכם לאורך זמן."}, {"time": "25/05/2019, 15:15", "sender": "אופיר שנצר", "text": "חשוב שיהיה לה גם work life balance"}, {"time": "25/05/2019, 15:17", "sender": "אופיר שנצר", "text": "לנו יש סמסונג בת שלוש , היא סבבה אבל התוכניות שלה ממש ארוכות וזה מבאס"}, {"time": "25/05/2019, 15:18", "sender": "אופיר שנצר", "text": "יש גם תוכנית 15 דקות אבל זה רק לשטיפה חלקית"}, {"time": "25/05/2019, 15:18", "sender": "גלעד", "text": "איזה דגם?"}, {"time": "25/05/2019, 15:20", "sender": "אופיר שנצר", "text": "לא זוכר משהו אקו באבל 7 קג"}]}, {"text": "עם ג'ינס זאת לא חוכמה, נראה את שי עושה את זה כשהוא לובש ספידו.", "sender": "גלעד", "senders": ["ד\"ר טליה שנצר", "אופיר שנצר", "גלעד"], "chat": [{"time": "25/09/2020, 09:52", "sender": "גלעד", "text": "אם אתם צריכים אני יכול לשלוח גרסה שאפשר להדפיס ולתלות על המקרר."}, {"time": "25/09/2020, 10:43", "sender": "שי איילת", "text": "כבר הדפסתי..."}, {"time": "25/09/2020, 12:51", "sender": "גלעד", "text": "עם ג'ינס זאת לא חוכמה, נראה את שי עושה את זה כשהוא לובש ספידו."}]}, {"text": "קחי חישוב של שתי מצות ליליד, שלוש למבוגר. כל העסק צריך להיות מושי", "sender": "אופיר שנצר", "senders": ["עינב אדלר", "איילת אדלר", "אופיר שנצר"], "chat": [{"time": "10/04/2020, 07:37", "sender": "ד\"ר טליה שנצר", "text": "איזה בבושקה קטן"}, {"time": "10/04/2020, 07:38", "sender": "ד\"ר טליה שנצר", "text": "אז מה המתכון למצבבריין"}, {"time": "10/04/2020, 07:57", "sender": "אופיר שנצר", "text": "מצות מים חלב סויה רסק תפוחי עץ , שוברים מערבבים מטגנים."}, {"time": "10/04/2020, 07:58", "sender": "אופיר שנצר", "text": "קחי חישוב של שתי מצות ליליד, שלוש למבוגר. כל העסק צריך להיות מושי"}, {"time": "10/04/2020, 08:34", "sender": "ד\"ר טליה שנצר", "text": "יצא יאמי"}, {"time": "10/04/2020, 09:18", "sender": "פסיה שנצר", "text": "יו איזה יופי.בתאבון.❣"}]}, {"text": "קפה אין לי אבל לבבות לכל אחד מכם יש לי.", "sender": "פסיה שנצר", "senders": ["גלעד", "אלי שנצר", "פסיה שנצר"], "chat": [{"time": "05/02/2021, 08:40", "sender": "פסיה שנצר", "text": "קפה אין לי אבל לבבות לכל אחד מכם יש לי."}, {"time": "05/02/2021, 10:42", "sender": "גלעד", "text": "שי שתהיה חזק כמו תמנון"}]}, {"text": "הי.הגענו בשלום.התמקמנו במלון היפה.ועכשיו נצא לסיבוב הכרת השטח.אגב כמובן יורד גשם אבל לא קר.", "sender": "פסיה שנצר", "senders": ["עינב אדלר", "פסיה שנצר", "ענת אופיר"], "chat": [{"time": "17/10/2021, 20:39", "sender": "פסיה שנצר", "text": "הי.הגענו בשלום.התמקמנו במלון היפה.ועכשיו נצא לסיבוב הכרת השטח.אגב כמובן יורד גשם אבל לא קר."}, {"time": "17/10/2021, 20:40", "sender": "פסיה שנצר", "text": "ואופיר תודה יל הסרטונים והתמונות היפות."}, {"time": "17/10/2021, 20:40", "sender": "אופיר שנצר", "text": "תהנו"}, {"time": "17/10/2021, 20:40", "sender": "אופיר שנצר", "text": "🙂"}, {"time": "17/10/2021, 20:41", "sender": "פסיה שנצר", "text": "מתוקי .💗😍"}]}, {"text": "אלי, כל הכבוד על ההשקעה והוידאו-ארט אבל הבת שלך כבר מזמן לא בת 19... 😂", "sender": "שי איילת", "senders": ["מעיין אדלר", "ענת אופיר", "שי איילת"], "chat": [{"time": "25/11/2020, 07:43", "sender": "איילת אדלר", "text": "אההההה אוקי. תודה😘"}, {"time": "25/11/2020, 08:34", "sender": "פסיה שנצר", "text": "בוקר טוב ."}, {"time": "25/11/2020, 08:36", "sender": "ענת אופיר", "text": "מזל טוב איילת!! 🥳🥳🥳"}, {"time": "25/11/2020, 09:18", "sender": "אלי שנצר", "text": "https://youtu.be/CiD8xgNPaMg"}, {"time": "25/11/2020, 09:21", "sender": "אלי שנצר", "text": "https://youtu.be/_umEYBTFHjs"}, {"time": "25/11/2020, 10:16", "sender": "שי איילת", "text": "אלי, כל הכבוד על ההשקעה והוידאו-ארט אבל הבת שלך כבר מזמן לא בת 19... 😂"}, {"time": "25/11/2020, 10:29", "sender": "איילת אדלר", "text": "אוהבת אתכם❤️"}, {"time": "25/11/2020, 10:40", "sender": "שי איילת", "text": "איילת שלי,"}, {"time": "25/11/2020, 12:37", "sender": "אלי שנצר", "text": "בשבלי היא תמיד תשאר נילדה הקטנה שלי"}]}])

    quiz.next()
</script>

</html>
        