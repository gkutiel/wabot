
<!DOCTYPE html>
<html>
<style>
    * {
        box-sizing: border-box;
    }

    html,
    body {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        border: 1px solid transparent;
    }

    body {
        background-color: whitesmoke;
    }

    main {
        overflow: hidden;
        padding: 2em;
        width: 30em;
        margin: 10em auto;
        background-color: white;
        box-shadow: 0 0 0.3em #aaa;
    }

    #q {
        font-weight: bold;
    }

    .answers {
        line-height: 1.5em;
    }

    .answer>label {
        line-height: 1.5em;
        cursor: pointer;
    }

    input[type=radio] {
        cursor: pointer;
    }

    input[type=radio]:disabled {
        display: none;
    }

    input[type=radio]:disabled+label {
        cursor: default;
    }

    :disabled+label[correct='no']::before {
        content: '❌';
        margin-left: .5em;
    }

    :disabled+label[correct='yes']::before {
        content: '✔️';
        margin-left: .5em;
    }

    #chat {
        max-height: 80em;
        margin: 2em 0;
        overflow: auto;
        font-size: .8em;
        opacity: 0;
        /* transition: opacity 3s; */
    }

    .msg {
        margin: .5em 0;
        padding: .3em .5em;
        background-color: #f0fff3;
        border: 1px solid #eee;
        border-radius: .5em;
    }

    time {
        color: #999;
        font-size: .8em;
        float: left;
    }

    .sender {
        font-weight: bold;
    }

    #score {
        font-size: 1.5em;
        font-weight: bold;
        text-align: center;
    }
</style>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>

    <title>מי אמר למי?</title>

    <meta property="og:title" content="מי אמר למי?">
    <meta property="og:site_name" content="מי אמר למי?">
    <meta property="og:url" content="">
    <meta property="og:description" content="מי אמר למי?.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://gkutiel.github.io/wabot/favicon.png">

    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel="icon" type="image/png" href="https://gkutiel.github.io/wabot/favicon.png" />


</head>

<body dir='rtl'>
    <main>
        <p>מי אמר/ה?</p>
        <p id='q'></p>

        <div id='answers'>
        </div>

        <div id="chat"></div>

        <div class="next">
            <button id='next'>שאלה הבאה</button>
        </div>
        <div id="score"></div>
    </main>
</body>

<script>
    function $(id) {
        return document.getElementById(id);
    }

    function e(html) {
        const div = document.createElement('div')
        div.innerHTML = html
        return div.firstElementChild
    }

    class Question {
        constructor(text) {
            this.e = $('q');
        }
        set text(text) {
            this.e.innerText = text;
        }
    }

    class Answer {
        static id = 0;
        constructor(cb) {
            const id = Answer.id++;
            this.good = false
            this.e = e(`
                <div class="answer">
                    <input type='radio' id='${id}' name='answer' />
                    <label for='${id}' correct='no'></label>
                </div>
            `)
            $('answers').appendChild(this.e)

            this.e.addEventListener('change', () => {
                $('chat').style.opacity = 1;
                cb(this.correct);
            })

            this.label = this.e.querySelector('label')
            this.input = this.e.querySelector('input')
        }

        set text(text) {
            this.label.innerText = text;
            this.input.disabled = false;
            this.input.checked = false;
        }

        set correct(correct) {
            this.good = correct;
            this.label.setAttribute('correct', correct ? 'yes' : 'no')
        }

        get correct() {
            return this.good;
        }

        disable() {
            this.input.disabled = true;
        }
    }

    class Chat {
        constructor() {
            this.e = $('chat');
        }
        set msgs(msgs) {
            this.e.style.opacity = 0;
            this.e.innerHTML = '';
            for (const msg of msgs) {
                this.e.appendChild(e(`
                    <div class='msg'>
                        <time>${msg.time}</time>
                        <span class='sender'>${msg.sender}</span>
                        <div>${msg.text}</div>
                    </div>
                `))
            }
        }
    }


    class Quiz {
        constructor(quiz) {
            this.score = 0;
            this.qid = 0;
            this.quiz = quiz;

            this.scoreDiv = $('score');
            this.question = new Question();

            this.answers = [
                new Answer(this.on_answer),
                new Answer(this.on_answer),
                new Answer(this.on_answer)];

            this.chat = new Chat();
            this.nextButton = $('next');
            this.nextButton.addEventListener('click', this.next);
        }

        nextQuestion() {
            return this.quiz[this.qid++];
        }

        on_answer = (correct) => {
            if (correct) {
                this.score++;
            }

            for (let answer of this.answers) {
                answer.disable();
            }

            this.nextButton.disabled = false;
            this.scoreDiv.innerText = `${this.qid}/${this.quiz.length}`;
        }

        next = () => {
            try {
                const q = this.nextQuestion();
                this.nextButton.disabled = true;
                this.question.text = q.text;
                this.chat.msgs = q.chat;

                for (let i = 0; i < this.answers.length; i++) {
                    this.answers[i].text = q.senders[i];
                    this.answers[i].correct = q.senders[i] === q.sender;
                }
            } catch (e) {
                const score = (this.score / this.qid * 100).toFixed(0)
                this.scoreDiv.innerText = `תוצאה סופית: ${score}%`;
            }
        }
    }
    const quiz = new Quiz([{"text": "מחכה ליום שאחרי אסונות רבנים יקראו לנשים להתלבש פחות צנוע.", "sender": "גלעד", "senders": ["יותם ארצות הברית", "חבובה", "גלעד"], "chat": [{"time": "04/05/2021, 19:49", "sender": "גלעד", "text": "מחכה ליום שאחרי אסונות רבנים יקראו לנשים להתלבש פחות צנוע."}, {"time": "04/05/2021, 21:51", "sender": "אורי אברהם", "text": "ערב טוב"}, {"time": "04/05/2021, 21:51", "sender": "אורי אברהם", "text": "אנחנו צריכים חציר. יש למישהו?"}, {"time": "04/05/2021, 21:58", "sender": "גלעד", "text": "לא קראת? אתה צריך לחפש."}, {"time": "04/05/2021, 22:08", "sender": "אורי אברהם", "text": "איפה כדאי לחפש חציר?"}]}, {"text": "לא, הספיקה לעלות על אחד המתקנים. שנים של אימוני תופסת גובה סוף סוף הביאו תועלת (:", "sender": "נועה אלגרבלי", "senders": ["חבובו ינאי", "יותם ארצות הברית", "נועה אלגרבלי"], "chat": [{"time": "29/09/2020, 12:03", "sender": "נועה אלגרבלי", "text": "בכיפור בגן משחקים אצלינו, הוא לא התכוון לתקוף אבל הוא נבהל וזה היה ממש באמצע הגן משחקים ליד הבנות שלי"}, {"time": "29/09/2020, 12:09", "sender": "גלעד", "text": "אגב, רעיון לסטארטאפ: שולחן עם פינה חכמה."}, {"time": "29/09/2020, 12:11", "sender": "יובל קורן", "text": "עוד ראיון  - חיישן מחוץ לשירותים בעבודה שמראה כמה בטוח להכנס (בדומה לחיישן בכיריים אינדוקציה)"}, {"time": "29/09/2020, 12:13", "sender": "גלעד", "text": "ואם הוא ירוק הוא מדפיס לך תשבץ לפני הכניסה."}, {"time": "29/09/2020, 13:28", "sender": "יובל קורן", "text": "הוא תפס אותה? אם לא אני  מכיר מאמן אתלטיקה שמחפש כשרונות"}, {"time": "29/09/2020, 14:02", "sender": "נועה אלגרבלי", "text": "לא, הספיקה לעלות על אחד המתקנים. שנים של אימוני תופסת גובה סוף סוף הביאו תועלת (:"}, {"time": "29/09/2020, 14:40", "sender": "יובל קורן", "text": "כשרון לוהט"}, {"time": "29/09/2020, 16:37", "sender": "גלעד", "text": "https://gkutiel.github.io/wikicross/"}]}, {"text": "הקטע של ארוחת ערב כבר היה קל... לינגה באו ממש מהר", "sender": "יובל קורן", "senders": ["יותם ארצות הברית", "יובל קורן", "חבובה"], "chat": [{"time": "19/06/2021, 20:30", "sender": "חבובו ינאי", "text": "והרדמות*"}, {"time": "19/06/2021, 20:30", "sender": "יובל קורן", "text": "אני הכנתי להם ארוחת ערב 😅"}, {"time": "19/06/2021, 20:31", "sender": "יובל קורן", "text": "נראה לי שאיבדתי קצת מהשפיות..."}, {"time": "19/06/2021, 20:31", "sender": "דיאנה אורי", "text": "חחחחחח"}, {"time": "19/06/2021, 20:35", "sender": "חבובה", "text": "זה עניין של אימון. תשקיע עוד כמה פעמים ויהיה לך ממש קל."}, {"time": "19/06/2021, 20:35", "sender": "יובל קורן", "text": "הקטע של ארוחת ערב כבר היה קל... לינגה באו ממש מהר"}, {"time": "19/06/2021, 20:37", "sender": "חבובו ינאי", "text": "תאמין לי ואני עוד חשבתי השקעת בסלט וחביתה 😅"}, {"time": "19/06/2021, 20:38", "sender": "יובל קורן", "text": "האמת גם חתכתי סלט 😂"}, {"time": "19/06/2021, 20:39", "sender": "חבובו ינאי", "text": "שמרת על הנכדים שלך?"}, {"time": "19/06/2021, 20:40", "sender": "יובל קורן", "text": "על האחיינים"}]}, {"text": "גלעד, זאת קבוצה של חברים מהטכניון... באמת יש כאן משהו שמצביע ביבי?", "sender": "חבובו ינאי", "senders": ["נועה אלגרבלי", "אלעד גדרון", "חבובו ינאי"], "chat": [{"time": "15/09/2019, 18:07", "sender": "יובל קורן", "text": "אני כבר קיבלתי כמה מיילים של עוקץ"}, {"time": "15/09/2019, 19:28", "sender": "גלעד", "text": "מי שלא מצביע ביבי הוא סיסי."}, {"time": "15/09/2019, 20:54", "sender": "חבובו ינאי", "text": "גלעד, זאת קבוצה של חברים מהטכניון... באמת יש כאן משהו שמצביע ביבי?"}]}, {"text": "ובנושא אחר. למישהו בקבוצה יש אולי אוזניות חוסמות רעש של סוני?", "sender": "חבובה", "senders": ["חבובה", "יותם ארצות הברית", "גלעד"], "chat": [{"time": "08/10/2019, 06:52", "sender": "גלעד", "text": "בדרך כלל אני לא נוהג לעשות דברים כאלה בבלוג שמוקדש כולו למספרים, אבל זה באמת אירוע מיוחד אז:"}, {"time": "08/10/2019, 08:02", "sender": "חבובה", "text": "מזל טוב דיאנה, יום הולדת שמח 🥳🥳🥳"}, {"time": "08/10/2019, 08:03", "sender": "חבובה", "text": "ובנושא אחר. למישהו בקבוצה יש אולי אוזניות חוסמות רעש של סוני?"}, {"time": "08/10/2019, 08:04", "sender": "גלעד", "text": "לי, את הדגם הכי זול. לא מדהים."}, {"time": "08/10/2019, 08:05", "sender": "חבובה", "text": "תודה, נראה לי באמת  שאקנה את ה bose"}, {"time": "08/10/2019, 08:10", "sender": "גיא נועה", "text": "ה qc35 סבבה"}, {"time": "08/10/2019, 08:11", "sender": "חבובה", "text": "הן מתקפלות?"}]}, {"text": "אצלנו בשכונה יש קניה מרוכז. מחלקאים לחלק מהפרות במחירים משתלמים. דבר איתי אם אתה רוצה להצטרף", "sender": "חבובה", "senders": ["גלעד", "יותם ארצות הברית", "חבובה"], "chat": [{"time": "04/06/2021, 16:09", "sender": "יובל קורן", "text": "קנית אותי במוריסי"}, {"time": "04/06/2021, 17:34", "sender": "יובל קורן", "text": "למי צריך להצביע כדי להוריד מחיר של פירות? טירוף לאחרונה..."}, {"time": "04/06/2021, 17:43", "sender": "גלעד", "text": "https://open.spotify.com/episode/24cqEA28QkWYoCNqdliyEg?si=VwOjkxoLRM2ftyuIjX1YwQ&utm_source=whatsapp"}, {"time": "04/06/2021, 17:50", "sender": "חבובה", "text": "אצלנו בשכונה יש קניה מרוכז. מחלקאים לחלק מהפרות במחירים משתלמים. דבר איתי אם אתה רוצה להצטרף"}, {"time": "04/06/2021, 17:50", "sender": "יובל קורן", "text": "אני אשמח, זה במשלוח הביתה?"}, {"time": "04/06/2021, 17:51", "sender": "חבובה", "text": "לא, זה מגיע למישהו בשכונה שמרכז את הקנייה ואוספים את זה ממנו"}, {"time": "04/06/2021, 17:52", "sender": "יובל קורן", "text": "סבבה"}, {"time": "04/06/2021, 17:56", "sender": "גלעד", "text": "בטח לא לבנט, אתה יודע איזה מחיר הוא מוכן לשלם בשביל תמר."}]}, {"text": "אני לא רואה אותם מעלים את הריבים בטווח הזמן הבינוני. בקיצור מאוד קשה עד בלתי אפשרי לנבא האם שער הדולר יעלה או ירד בחלון שמנים של 5 או 10 שנים", "sender": "חבובו ינאי", "senders": ["אורי אברהם", "אלעד גדרון", "חבובו ינאי"], "chat": [{"time": "30/10/2019, 08:36", "sender": "חבובו ינאי", "text": "ולפני חודש הוא היה על 3.47"}, {"time": "30/10/2019, 08:37", "sender": "חבובו ינאי", "text": "רק זאת ירידה של כמעט תשואה של שנה"}, {"time": "30/10/2019, 08:38", "sender": "חבובו ינאי", "text": "השיא של 90 יום אחורנית הוא 3.54 אז בחלון זמנים של 3 חודשים הוא יחסית גבוה"}, {"time": "30/10/2019, 08:41", "sender": "גיא נועה", "text": "אי אפשר לנבא מה יהיה עוד שנה.. אבל תסתכל על חלון של 5 או 10 שנים?"}, {"time": "30/10/2019, 08:47", "sender": "חבובו ינאי", "text": "אבל מה זה אומר? שבעוד 5 שנים שער הדולר יעלה בסבירות גבוהה? הריבית האמריקאית נמוכה מאוד בגלל הצרות שיש להם עם החוב הלאומי שלא מפסיק לשבור שיאים שליליים."}, {"time": "30/10/2019, 08:47", "sender": "חבובו ינאי", "text": "אני לא רואה אותם מעלים את הריבים בטווח הזמן הבינוני. בקיצור מאוד קשה עד בלתי אפשרי לנבא האם שער הדולר יעלה או ירד בחלון שמנים של 5 או 10 שנים"}, {"time": "30/10/2019, 08:47", "sender": "חבובו ינאי", "text": "הבעייה עם השקעה כזאת היא ששער הדולר תנודתי ויכול למחוק לך תשואות של שנה כתלות בזמן המכירה"}, {"time": "30/10/2019, 09:07", "sender": "גיא נועה", "text": "אתה מסכים שהחוסן של הדולר גדול בהכרח מהחוסן של השקל לטווח הארוך?"}, {"time": "30/10/2019, 09:09", "sender": "חבובו ינאי", "text": "זאת שאלה מורכבת אבל התשובה היא לא חד משמעית"}, {"time": "30/10/2019, 09:10", "sender": "חבובו ינאי", "text": "עדיף לדבר בטלפון... 😅"}]}, {"text": "זה צריך לחשוב... אולי לעקוב אחרי אתרי חדשות ולראות כמה כתבות הם מפרסמים ביום לפי המוספים השונים?", "sender": "יובל קורן", "senders": ["יותם אלאור", "גיא נועה", "יובל קורן"], "chat": [{"time": "16/08/2021, 18:28", "sender": "יותם ארצות הברית", "text": "This message was deleted"}, {"time": "16/08/2021, 18:29", "sender": "גלעד", "text": "You deleted this message"}, {"time": "16/08/2021, 18:29", "sender": "יותם ארצות הברית", "text": "מחקתי"}, {"time": "16/08/2021, 18:32", "sender": "יובל קורן", "text": "תבנה אתר שעושה קרולינג ואגרגציה למשהו מעניין, ואז תציג בו גרפים וטבלאות"}, {"time": "16/08/2021, 18:32", "sender": "גלעד", "text": "כמו מה?"}, {"time": "16/08/2021, 18:33", "sender": "יובל קורן", "text": "זה צריך לחשוב... אולי לעקוב אחרי אתרי חדשות ולראות כמה כתבות הם מפרסמים ביום לפי המוספים השונים?"}, {"time": "16/08/2021, 18:33", "sender": "יובל קורן", "text": "או משהו של פורטנייט"}, {"time": "16/08/2021, 18:34", "sender": "גלעד", "text": "אפשר אולי לעקוב אחרי טוויטר ולזהות שם משפיענים."}, {"time": "16/08/2021, 18:34", "sender": "יובל קורן", "text": "משם עלה לי הרעיון 😅"}, {"time": "16/08/2021, 18:34", "sender": "יובל קורן", "text": "אולי תעשה את זה על twitch"}]}, {"text": "לא יכלו לדאוג לזה לפני תחילת המשחק? השחקנים הגיעו לשם כמה ימים קודם 😬", "sender": "יובל קורן", "senders": ["גיא נועה", "יותם אלאור", "יובל קורן"], "chat": [{"time": "05/09/2021, 22:09", "sender": "גלעד", "text": "המלצה לסאברדיט?"}, {"time": "05/09/2021, 22:22", "sender": "יובל קורן", "text": "This message was deleted"}, {"time": "05/09/2021, 22:22", "sender": "יובל קורן", "text": "This message was deleted"}, {"time": "05/09/2021, 23:48", "sender": "יובל קורן", "text": "https://youtu.be/HNSB9XIw4do מישהו הבין מה הם רצו? למה עצרו את המשחק..."}, {"time": "05/09/2021, 23:50", "sender": "יותם ארצות הברית", "text": "Brazilian health authorities storming the pitch in Brazil-Argentina and demands the game to be stopped, as they claim Romero, Martinez, Buendia and Lo Celso lied about having been in England and not spent the obligatory 14 days in quarantine upon entering Brazil. Scenes."}, {"time": "05/09/2021, 23:51", "sender": "יובל קורן", "text": "לא יכלו לדאוג לזה לפני תחילת המשחק? השחקנים הגיעו לשם כמה ימים קודם 😬"}]}, {"text": "אם הקלף האחרון שלי זה + אני יכול לשים אותו או שאני צריך לקחת קלף?", "sender": "גלעד", "senders": ["אורי אברהם", "יותם ארצות הברית", "גלעד"], "chat": [{"time": "01/08/2021, 20:38", "sender": "יותם ארצות הברית", "text": "גזרים ירוקים?"}, {"time": "01/08/2021, 20:38", "sender": "גלעד", "text": "קיוויתי שלא תשימו לב."}, {"time": "01/08/2021, 20:52", "sender": "גלעד", "text": "זה הפריע לך להבין את הבדיחה?"}, {"time": "01/08/2021, 20:57", "sender": "גלעד", "text": "אם הקלף האחרון שלי זה + אני יכול לשים אותו או שאני צריך לקחת קלף?"}, {"time": "01/08/2021, 21:19", "sender": "אורי אברהם", "text": "צריך לקחת קלף"}, {"time": "01/08/2021, 21:20", "sender": "אורי אברהם", "text": "אהבתי את העריכה המוזיקלית. אח שלך עשה?"}, {"time": "01/08/2021, 21:22", "sender": "גלעד", "text": "יש לו מתחרה"}, {"time": "01/08/2021, 21:22", "sender": "גלעד", "text": "הבנת את הבדיחה אבל?"}]}])

    quiz.next()
</script>

</html>
        